Last log:
2016.02.20: changed search.cpp and corrected many issues with the energy, field, and temp reported values.
2016.02.21: changed the logging, added static variables into constants.h


BNMRoffice to do list:
-Must have one file that interacts with bnmr data or ascii data.


Issues with Qt5/bnmroffice install:
1-gl.h: sudo apt-get install mesa-common-dev
2-compile mud library and copy mud.h it to external codes headers.
3-compile minuit2. 
4-running qmake not found (do sudo apt-get install qt5-default) and sudo apt-get install libqt5webkit5-dev


Issues fixes:

1) Problem: Warning messages
$ Gtk-Message: Failed to load module "canberra-gtk-module"

Solution:
sudo apt-get install libcanberra-gtk3-module
if failed try:
sudo apt-get install libcanberra-gtk*
source: http://www.linuxquestions.org/questions/linux-software-2/gtk-message-failed-to-load-module-canberra-gtk-module-936168/


2) Problem: Warning messages
Gtk-Message: Failed to load module "pantheon-filechooser-module"

Solution:
As suggested here. It worked after logout or restart.
http://askubuntu.com/questions/684169/gtk-message-failed-to-load-module-pantheon-filechooser-module

3) When I run bnmroffice I get an error message: "libpng warning: iCCP: Not
recognizing known sRGB profile that has been edited". 

Solution: By Ryan McFadden
The issue is discussed here:
http://tex.stackexchange.com/questions/125612/warning-pdflatex-libpng-warning-iccp-known-incorrect-srgb-profile
As a quick fix, I just used the suggested script (see attached) to "fix"
the .png files in the ~/bnmroffice/ directory before compiling.
'''
for f in $(find . -type f -name "*.png")
do
echo "Processing $f ..."
convert $f -strip $f
done
'''


Problem:

- SLR runs have one less bin than they should. My feeling is that this has
to do how t0 is defined - it should be the low-edge of the first 'beam on
dwelltime' bin.

Solution:


Problem:

- Some 1f runs with small frequency steps (e.g., 2014:40195, step size 250
Hz) have rounding errors in the frequencies output to the *.Asy.dat files.

Solution:
It is fixed. It was a problem with creating files using with ofstream. Qtextstream is
more reliable if used with setrealnumbernotation to fixednotation.


Problem:
- Fitting functionality does work as expected. In particular: the time it
takes to perform the chi^2 minimization is anomolously (or unreasonably!)
long, especially compared to the first version of bnmroffice or my own
fitting routines via ROOT (also using Minuit2); and the fit chi^2 does not
seem to be reliably minimized. The trivial case (i.e., pulsed exponential)
appears to work OK for single/global fits, but there is a problem with the
ExpPulsed2 function - it does not appear be fitting the sum of two
exponentials and it returns the exact same chi^2 as one would obtain from
a ExpPulsed fit. ExpPulsedStr fits are also problematic - it almost always
returns "Error: PulsedSqrExp.cpp \n The integral has NOT converged!" or
"Migrad failed, try simplex method, and then revert back." and rarely
finds the global mimima. The issue of long fitting times is only
exacerbated when global fitting is invoked.


Problem:
- Would be possible to implement "clever" fitting limits based on
information taken from the asymmetry spectrum? For e.g., fitting
resonances: the intial guess for the baseline could be the average
asymmetry of the first/last bins, or the resonance position limits could
be automatically defined by the upper/lower frequencies of a resonance
spectrum and the inital guess being the middle of the range.


Hints: 
- README.md: 6) iii) & iv): if the Qt binaries are installed via .rpms
from your distro's software manager, PATH need not be specified - simply
running e.g., qmake or qmake-qt5 (distro depenedent) works.

================================================================================================================
Ryan's email:
Hi Hassan,

Sorry for taking so long to get back to you with comments on your program
- I have to say that it is trully impressive (the streaming window is a
very nice feature!). I do however have a few comments/suggestions.

- When I run bnmroffice I get an error message: "libpng warning: iCCP: Not
recognizing known sRGB profile that has been edited". The issue is
discussed here:
http://tex.stackexchange.com/questions/125612/warning-pdflatex-libpng-warning-iccp-known-incorrect-srgb-profile
As a quick fix, I just used the suggested script (see attached) to "fix"
the .png files in the ~/bnmroffice/ directory before compiling. Fixed

- SLR runs have one less bin than they should. My feeling is that this has
to do how t0 is defined - it should be the low-edge of the first 'beam on
dwelltime' bin.

- Some 1f runs with small frequency steps (e.g., 2014:40195, step size 250
Hz) have rounding errors in the frequencies output to the *.Asy.dat files.

- Fitting functionality does work as expected. In particular: the time it
takes to perform the chi^2 minimization is anomolously (or unreasonably!)
long, especially compared to the first version of bnmroffice or my own
fitting routines via ROOT (also using Minuit2); and the fit chi^2 does not
seem to be reliably minimized. The trivial case (i.e., pulsed exponential)
appears to work OK for single/global fits, but there is a problem with the
ExpPulsed2 function - it does not appear be fitting the sum of two
exponentials and it returns the exact same chi^2 as one would obtain from
a ExpPulsed fit. ExpPulsedStr fits are also problematic - it almost always
returns "Error: PulsedSqrExp.cpp \n The integral has NOT converged!" or
"Migrad failed, try simplex method, and then revert back." and rarely
finds the global mimima. The issue of long fitting times is only
exacerbated when global fitting is invoked.

- The beam energy (listed in the Search tab) is not calculated correctly
in all cases (e.g., in runs from 2015 the listed energy exceeds the ISAC
target bias in many cases!). The platform bias also does not seem to be
taken into account in many of these cases either. Fixed

- Many of the xtal options for the Van Vleck 2nd moment calculations
return nothing. Perhaps these could be removed (or implemented)? Fixed

- Would be possible to implement "clever" fitting limits based on
information taken from the asymmetry spectrum? For e.g., fitting
resonances: the intial guess for the baseline could be the average
asymmetry of the first/last bins, or the resonance position limits could
be automatically defined by the upper/lower frequencies of a resonance
spectrum and the inital guess being the middle of the range.

- README.md: 6) iii) & iv): if the Qt binaries are installed via .rpms
from your distro's software manager, PATH need not be specified - simply
running e.g., qmake or qmake-qt5 (distro depenedent) works.


I hope these are helpfull - I'll keep you posted with more things as I
find them.

Cheers,
Ryan

